---
import MainLayout from "../layouts/MainLayout.astro";
import { CanvasHero } from "../components/CanvasHero";
import { BentoGrid } from "../components/BentoGrid";
import { GoldButton } from "../components/GoldButton";
import { NetworkCube } from "../components/NetworkCube";
import { BranchingTree } from "../components/BranchingTree";
import { TenXCoreProcessor } from "../components/TenXCoreProcessor";
import { AfricaMap } from "../components/AfricaMap";
import { SystemStatusPill } from "../components/SystemStatusPill";
import { getEntry, getCollection } from "astro:content";

const homePage = await getEntry("pages", "index");
const teamMembers = await getCollection("team");

if (!homePage) {
	throw new Error("Home page content not found");
}

const { data } = homePage;
---

<MainLayout title={data.seo.title} description={data.seo.description}>
	<div class="relative w-full min-h-screen flex flex-col">
		<!-- Canvas Background -->
		<CanvasHero
			client:only="react"
			variant="shape"
			className="fixed inset-0 z-0"
		/>

		<!-- Hero Section -->
		<section
			class="relative z-10 flex flex-col items-center justify-center min-h-screen text-center px-4 py-20"
		>
			<div class="max-w-4xl mx-auto space-y-6">
				<!-- Animated Pill -->
				<SystemStatusPill client:load />

				<h1
					class="text-5xl md:text-7xl lg:text-8xl font-heading font-bold tracking-tighter leading-tight text-white mb-6"
				>
					{data.hero.headline}
					<br />
					<span class="text-tenx-gold"
						>{data.hero.highlightedText}</span
					>
				</h1>

				<p
					class="text-lg md:text-xl text-white/60 max-w-2xl mx-auto leading-relaxed"
				>
					{data.hero.subheadline}
				</p>

				<div
					class="flex flex-col md:flex-row gap-4 justify-center pt-8"
				>
					<a href={data.hero.primaryCta!.href}>
						<GoldButton client:load
							>{data.hero.primaryCta!.label}</GoldButton
						>
					</a>
					<a href={data.hero.secondaryCta!.href}>
						<GoldButton variant="outline" client:load
							>{data.hero.secondaryCta!.label}</GoldButton
						>
					</a>
				</div>
			</div>

			<!-- Scroll Indicator (Moved relative with padding) -->
			<div
				class="mt-20 flex flex-col items-center gap-2 opacity-50 animate-bounce"
			>
				<span class="text-[10px] tracking-widest uppercase"
					>Explore</span
				>
				{/* Mouse Icon SVG */}
				<svg
					width="24"
					height="24"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					class="text-tenx-gold"
				>
					<rect x="5" y="2" width="14" height="20" rx="7"></rect>
					<line x1="12" y1="6" x2="12" y2="10"></line>
				</svg>
				<div
					class="w-px h-8 bg-gradient-to-b from-tenx-gold to-transparent"
				>
				</div>
			</div>
		</section>

		<!-- Bento Grid Navigation -->
		<section class="relative z-10 py-20" id="ecosystem">
			<div class="container mx-auto px-4 mb-12">
				<h2
					class="text-3xl font-heading font-bold border-l-4 border-tenx-gold pl-4"
				>
					{data.ecosystem!.title}
				</h2>
			</div>
			<BentoGrid client:visible />
		</section>

		<!-- The Hybrid Model Section (From About) -->
		<section
			class="relative z-10 border-t border-white/5 bg-black/40 backdrop-blur"
			id="about"
		>
			<div class="grid md:grid-cols-2 min-h-[80vh]">
				<div
					class="p-8 md:p-12 lg:p-20 border-r border-white/5 flex flex-col justify-center"
				>
					<div class="w-12 h-1 bg-tenx-gold mb-6"></div>
					<h2
						class="text-3xl md:text-4xl font-heading font-bold mb-6"
					>
						{data.hybridModel!.title}
					</h2>
					<p class="text-xl text-white/60 mb-6 leading-relaxed">
						{data.hybridModel!.descriptionPrimary}
					</p>
					<p class="text-white/60 mb-8">
						{data.hybridModel!.descriptionSecondary}
					</p>
					<ul class="space-y-4 font-mono text-sm text-tenx-gold">
						{
							data.hybridModel!.steps.map((step) => (
								<li class="flex items-center gap-3">{step}</li>
							))
						}
					</ul>
				</div>
				<TenXCoreProcessor client:visible />
			</div>
		</section>

		<!-- Engine Section (Split Screen) -->
		<section
			class="relative z-10 w-full bg-black/40 backdrop-blur-sm border-t border-white/5 flex flex-col md:flex-row h-auto md:h-[90vh]"
		>
			<div
				class="w-full md:w-1/2 relative min-h-[500px] md:h-full flex items-center justify-center overflow-hidden"
			>
				<BranchingTree client:visible />
			</div>
			<div
				class="w-full md:w-1/2 p-8 md:p-12 lg:p-20 flex flex-col justify-center z-20"
			>
				<h2
					class="text-3xl md:text-5xl font-heading font-bold mb-6 md:mb-8 text-white"
				>
					{data.engine!.headline}
					<br />
					<span class="text-white/40"
						>{data.engine!.headlineSecondary}</span
					>
				</h2>
				<p
					class="text-base md:text-lg text-white/60 leading-relaxed mb-6"
				>
					{data.engine!.description}
				</p>

				<ul class="space-y-4 font-mono text-sm text-tenx-gold mt-4">
					{
						data.engine!.pillars.map((pillar) => (
							<li class="flex items-center gap-3">
								<span class="w-2 h-2 bg-tenx-gold rounded-full" />{" "}
								{pillar}
							</li>
						))
					}
				</ul>
			</div>
		</section>

		<!-- Pan-African Footprint Section (From About) -->
		<section
			class="relative z-10 py-20 border-t border-white/5 backdrop-blur bg-black/10"
		>
			<div class="container mx-auto px-6">
				<div class="grid md:grid-cols-2 gap-12 items-center">
					<div class="">
						<AfricaMap client:visible />
					</div>
					<div>
						<div class="w-12 h-1 bg-tenx-gold mb-6"></div>
						<h2 class="text-4xl font-heading font-bold mb-6">
							{data.footprint!.title}
						</h2>
						<p class="text-white/60 mb-8 leading-relaxed">
							{data.footprint!.description}
						</p>
						<div class="grid grid-cols-2 gap-4">
							{
								data.footprint!.stats.map((stat) => (
									<div class="border-l-2 border-tenx-gold pl-4">
										<h4 class="font-bold text-2xl">
											{stat.value}
										</h4>
										<p class="text-xs text-white/40 uppercase tracking-widest">
											{stat.label}
										</p>
									</div>
								))
							}
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Leadership Section -->
		<!-- <section
			class="relative z-10 py-20 border-t border-white/5 bg-black/40"
		>
			<div class="container mx-auto px-6">
				<div class="mb-12">
					<h2
						class="text-3xl font-heading font-bold border-l-4 border-tenx-gold pl-4"
					>
						{data.leadership!.title}
					</h2>
					<p class="text-white/60 mt-4 max-w-2xl">
						{data.leadership!.description}
					</p>
				</div>

				<div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
					{
						teamMembers.map((member, index) => (
							<TeamMember
								client:visible
								member={{ ...member.data, id: member.id }}
								index={index}
							/>
						))
					}
				</div>
			</div>
		</section> -->

		<!-- IDC Network Section -->
		<section
			class="relative z-10 py-24 bg-gradient-to-b from-black/80 to-obsidian-void border-t border-white/5"
		>
			<div class="container mx-auto px-4">
				<div
					class="flex flex-col md:flex-row items-center justify-between gap-12"
				>
					<div class="w-full md:w-1/2">
						<h2 class="text-4xl font-heading font-bold mb-6">
							{data.idcNetwork!.title}
						</h2>
						<p class="text-xl text-white/80 mb-8 font-light">
							"{data.idcNetwork!.quote}"
						</p>
						<p class="text-white/60 mb-8 leading-relaxed">
							{data.idcNetwork!.description}
						</p>
						<a href={data.idcNetwork!.cta.href}>
							<GoldButton variant="outline" client:visible
								>{data.idcNetwork!.cta.label}</GoldButton
							>
						</a>
					</div>
					<div class="w-full md:w-1/2 flex justify-center">
						<NetworkCube client:visible />
					</div>
				</div>
			</div>
		</section>
	</div>
</MainLayout>
